/* portfolio - 1.0.0
* http://janicbeauchemin.com
* Copyright (c) 2013-05-28 Janic Beauchemin - http://janicbeauchemin.com */

var app=angular.module("portfolio",[]);app.config(function($routeProvider){$routeProvider.when("/",{templateUrl:"views/home.html",controller:"PortfolioHomeCtrl"}).otherwise({redirectTo:"/"})}),app.controller("PortfolioGlobalCtrl",function($scope,$http){$scope.getLanguage=function(language){$http.get("data/i18n/"+language+".json").success(function(data){$scope.copy=data}).error(function(data){console.log("error getting language copy from json file: "+data)})},$scope.changeLanguage=function(language){$scope.siteLanguage=language,$scope.getLanguage(language)},$scope.swapLanguage=function(){"en"==$scope.siteLanguage?$scope.changeLanguage("fr"):$scope.changeLanguage("en")},window.getComputedStyle||(window.getComputedStyle=function(el){return this.el=el,this.getPropertyValue=function(prop){var re=/(\-([a-z]){1})/g;return"float"==prop&&(prop="styleFloat"),re.test(prop)&&(prop=prop.replace(re,function(){return arguments[2].toUpperCase()})),el.currentStyle[prop]?el.currentStyle[prop]:null},this}),$.support.transition||($.fn.transition=$.fn.animate),$scope.device=window.getComputedStyle(document.body,":after").getPropertyValue("content"),$scope.siteLanguage="en",$scope.currentYear=(new Date).getFullYear(),$scope.getLanguage($scope.siteLanguage)}),app.controller("PortfolioHomeCtrl",function($scope,$http){$http.get("data/work.json").success(function(data){$scope.work=data,$.each($scope.work,function(index){$scope.work[index].images.selected=$scope.work[index].images.medium,"desktop"==$scope.device?$scope.work[index].images.selected=$scope.work[index].images.big:"mobile"==$scope.device&&($scope.work[index].images.selected=$scope.work[index].images.small)})}).error(function(data){console.log("error getting work from json file: "+data)})}),app.controller("twitterFeedCtrl",function($scope,$http,jqtweet){$scope.tweets=[],jqtweet.loadTweets(function(err,data){err?console.log("error getting tweets"):($scope.tweets=data,$scope.$apply())})}),app.directive("loadIsotope",function($timeout){return function(scope,element){scope.$last===!0&&$timeout(function(){var container=element.parent("ul");container.isotope({itemSelector:"li",filter:".web",masonry:{columnWidth:346}}),$.each(container.find(".link"),function(){""===$(this).find("a").text()&&$(this).hide()})},500)}}),app.directive("smoothScroll",function(){return function(scope,element,attr){var offset=parseInt("-"+$("header").outerHeight(),10);element.on("click",function(e){e.preventDefault(),$.smoothScroll({scrollTarget:attr.smoothScroll,offset:offset,easing:"easeInOutExpo",speed:1e3})})}}),app.directive("fancybox",function(){return function(scope,element){element.fancybox({padding:0})}}),app.directive("menuActivation",function($timeout){return function(scope,element){var elName=element.attr("id"),menu=$("nav"),menuEl=menu.find("."+elName);$timeout(function(){element.waypoint(function(){menu.find(".active").removeClass("active"),menuEl.addClass("active")})},1e3)}}),app.directive("isotopeCategory",function(){return function(scope,element){element.find("a").on("click",function(e){e.preventDefault(),element.find(".active").removeClass("active"),$(this).addClass("active"),$(".slider ul").isotope({filter:$(this).attr("data-filter")})})}}),app.directive("workHover",function(){return function(scope,element){element.on("mouseenter",function(){element.find(".info").stop(!0,!0).show(300,"easeInOutExpo",function(){element.find(".zoom").stop(!0,!0).show(300,"easeInOutExpo")})}),element.on("mouseleave",function(){element.find(".info").stop(!0,!0).hide(300,"easeInOutExpo",function(){element.find(".zoom").stop(!0,!0).hide(300,"easeInOutExpo")})})}}),app.directive("changeLanguage",function(){return function(scope,element,attrs){var language="en";attrs.changeLanguage&&(language=attrs.changeLanguage),element.on("click",function(e){e.preventDefault(),"swap"==language?scope.swapLanguage():scope.changeLanguage(language)})}}),app.directive("fitText",function(){return function(scope,element,attr){var maxSize="60px";attr.fitText&&(maxSize=attr.fitText),element.fitText(1,{maxFontSize:maxSize})}}),app.directive("skillPercentage",function(){return function(scope,element){var percentBar=element.find(".percent"),percentDiv=element.find(".right"),percentValue=0;scope.$watch(function(){percentValue=percentBar.attr("data-percent")}),element.waypoint(function(){var animateVal=setInterval(function(){var newWidth=Math.round(100*(percentBar.width()/element.width()));percentDiv.text(newWidth+"%")},20);percentBar.transition({width:percentValue+"%"},1100,function(){clearInterval(animateVal),percentDiv.text(percentValue+"%")})},{triggerOnce:!0,offset:"80%"})}}),app.directive("twitterStyling",function(jqtweet){return function(scope,element){scope.$watch(element,function(){var newEl=jqtweet.ify.clean(element.text());newEl.replace(/USER/g,scope.tweets[element.index()].user.screen_name).replace(/ID/g,scope.tweets[element.index()].id_str),element.html(newEl)})}}),app.directive("socialToggleIcons",function(){return function(scope,element){element.hover(function(){$(this).find(".active").stop(!0,!0).transition({opacity:"1"},300,"easeInOutExpo")},function(){$(this).find(".active").stop(!0,!0).transition({opacity:"0"},300,"easeInOutExpo")})}}),app.directive("vertAlign",function($timeout){return function(scope,element){function calculateHeight(){if("desktop"==scope.device){var height=element.height(),parentHeight=element.parent().height(),padding=(parentHeight-height)/2;element.css("padding-top",padding)}else element.css("padding-top","10px")}$timeout(function(){calculateHeight(),$(window).resize(function(){calculateHeight()})})}}),tester(),app.service("jqtweet",function(){this.loadTweets=function(callback){$.ajax({url:"http://api.twitter.com/1/statuses/user_timeline.json/",type:"GET",dataType:"jsonp",data:{screen_name:"janiclb",include_rts:!0,count:5,include_entities:!0},success:function(data){return callback(null,data)},error:function(data){return callback(data,null)}})},this.timeAgo=function(dateString){var rightNow=new Date,then=new Date(dateString);$.support.opacity||(then=Date.parse(dateString.replace(/( \+)/," UTC$1")));var diff=rightNow-then,second=1e3,minute=60*second,hour=60*minute,day=24*hour;return isNaN(diff)||0>diff?"":2*second>diff?"right now":minute>diff?Math.floor(diff/second)+" seconds ago":2*minute>diff?"about 1 minute ago":hour>diff?Math.floor(diff/minute)+" minutes ago":2*hour>diff?"about 1 hour ago":day>diff?Math.floor(diff/hour)+" hours ago":diff>day&&2*day>diff?"yesterday":365*day>diff?Math.floor(diff/day)+" days ago":"over a year ago"},this.ify={link:function(tweet){return tweet.replace(/\b(((https*\:\/\/)|www\.)[^\"\']+?)(([!?,.\)]+)?(\s|$))/g,function(link,m1,m2,m3,m4){var http=m2.match(/w/)?"http://":"";return'<a class="twtr-hyperlink" target="_blank" href="'+http+m1+'">'+(m1.length>25?m1.substr(0,24)+"...":m1)+"</a>"+m4})},at:function(tweet){return tweet.replace(/\B[@?]([a-zA-Z0-9_]{1,20})/g,function(m,username){return'<a target="_blank" class="twtr-atreply" href="http://twitter.com/intent/user?screen_name='+username+'">@'+username+"</a>"})},list:function(tweet){return tweet.replace(/\B[@?]([a-zA-Z0-9_]{1,20}\/\w+)/g,function(m,userlist){return'<a target="_blank" class="twtr-atreply" href="http://twitter.com/'+userlist+'">@'+userlist+"</a>"})},hash:function(tweet){return tweet.replace(/(^|\s+)#(\w+)/gi,function(m,before,hash){return before+'<a target="_blank" class="twtr-hashtag" href="http://twitter.com/search?q=%23'+hash+'">#'+hash+"</a>"})},clean:function(tweet){return this.hash(this.at(this.list(this.link(tweet))))}}});
//@ sourceMappingURL=app/js/dest/main.map.js